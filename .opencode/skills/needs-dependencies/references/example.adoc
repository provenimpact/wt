= Dependencies Example

This file shows a dependency audit and update cycle.

== Context

Given:

* `package.json` with 47 dependencies
* `constraints.adoc` with security constraint: "No dependency with a known CRITICAL or HIGH CVE may remain unpatched for more than 7 days"
* `constraints.adoc` with licensing constraint: "Only MIT, Apache-2.0, and BSD-licensed dependencies are permitted"

== Observation

....
Dependencies:
  total: 47
  outdated: 3
    - lodash: 4.17.20 -> 4.17.21 (patch)
    - express: 4.18.2 -> 4.19.0 (minor)
    - react: 18.2.0 -> 19.0.0 (major)
  vulnerable: 1
    - lodash@4.17.20: HIGH CVE-2021-23337 (command injection)
  unmaintained: 0
  license-violations: 0
Constraint violations:
  security: lodash@4.17.20 has HIGH CVE (constraint: no HIGH/CRITICAL CVEs)
....

== Evaluation

....
Action: update
Updates proposed:
  1. lodash 4.17.20 -> 4.17.21 (patch, LOW risk, auto-approve eligible)
  2. express 4.18.2 -> 4.19.0 (minor, MEDIUM risk, needs confirmation)
  3. react 18.2.0 -> 19.0.0 (major, HIGH risk, needs confirmation)

Constraint resolution:
  - Update #1 resolves the security constraint violation
....

== Execution (lodash patch -- auto-approved)

....
1. Updated lodash 4.17.20 -> 4.17.21 in package.json
2. Ran npm install -- lockfile updated
3. Verification:
   - Build: pass
   - Lint: pass
   - Tests: pass (47/47)
4. npm audit: 0 vulnerabilities (was 1)
5. Constraint re-check: security violation resolved

Result: lodash updated successfully. CVE-2021-23337 resolved.
....

== Execution (express minor -- user approved)

....
User confirmed: proceed with express update

1. Updated express 4.18.2 -> 4.19.0 in package.json
2. Ran npm install -- lockfile updated
3. Verification:
   - Build: pass
   - Lint: pass
   - Tests: pass (47/47)
4. No new vulnerabilities introduced

Result: express updated successfully.
....
